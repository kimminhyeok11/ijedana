<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>몬배틀 헌터즈 (MonBattle Hunters)</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Tailwind CSS, Tone.js, Supabase, Three.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body class="bg-[#2d2d2d] text-gray-300">
    <!-- Overlays and Loaders -->
    <div id="skill-effect-overlay"></div>
    <div id="main-loader" class="fixed inset-0 bg-gray-900/80 flex justify-center items-center z-[2000]"><div class="loader"></div></div>
    <div id="modal-container"></div>
    <div id="battle-effects-container"></div>

    <!-- Navigation Bar -->
    <nav class="bg-gray-900 shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-title text-2xl text-[#9c9] cursor-pointer" id="home-btn">몬배틀 헌터즈</span>
                </div>
                <div id="nav-links" class="flex items-center gap-2 sm:gap-4"></div>
            </div>
        </div>
    </nav>

    <!-- Auth View -->
    <div id="auth-view" class="view">
        <div class="max-w-md mx-auto mt-10 p-8 bg-gray-800 rounded-lg shadow-lg">
            <div id="auth-tabs" class="flex border-b border-gray-700 mb-6">
                <button data-tab="login" class="tab-btn flex-1 py-2 font-bold text-gray-500 border-b-2 border-transparent">로그인</button>
                <button data-tab="signup" class="tab-btn flex-1 py-2 font-bold text-gray-500 border-b-2 border-transparent">회원가입</button>
            </div>
            <!-- Login Form -->
            <form id="login-form" class="auth-form space-y-4">
                <input type="email" id="login-email" placeholder="이메일" class="w-full p-3 border rounded-lg bg-gray-700 text-white border-gray-600" required>
                <input type="password" id="login-password" placeholder="비밀번호" class="w-full p-3 border rounded-lg bg-gray-700 text-white border-gray-600" required>
                <button type="submit" class="w-full bg-[#8abeb7] text-white font-bold py-3 rounded-lg hover:bg-[#6cc]">로그인</button>
            </form>
            <!-- Signup Form -->
            <form id="signup-form" class="auth-form space-y-4 hidden">
                <input type="email" id="signup-email" placeholder="이메일" class="w-full p-3 border rounded-lg bg-gray-700 text-white border-gray-600" required>
                <input type="password" id="signup-password" placeholder="비밀번호" class="w-full p-3 border rounded-lg bg-gray-700 text-white border-gray-600" required>
                <button type="submit" class="w-full bg-[#9c9] text-white font-bold py-3 rounded-lg hover:bg-[#7a7]">회원가입 (5 크레딧 지급)</button>
            </form>
            <p id="auth-error" class="text-red-400 text-center mt-4"></p>
        </div>
    </div>

    <!-- Main Pokedex View -->
    <div id="pokedex-view" class="view">
        <div id="pokedex-view-background">
             <canvas id="pokedex-bg-canvas"></canvas>
        </div>
        <div class="max-w-7xl mx-auto p-4 sm:p-6 md:p-8">
            <header class="text-center mb-8">
                <h1 class="font-title text-5xl md:text-6xl text-gray-100">몬배틀 헌터즈</h1>
                <p class="text-gray-400 mt-2">키우고, 합치고, 싸워라! 이것이 진짜 몬배틀.</p>
                 <div class="mt-4 flex justify-center flex-wrap gap-2 sm:gap-4">
                      <button id="go-to-battle-btn" class="bg-[#c99] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#a77] transition-transform transform hover:scale-105 disabled:bg-gray-600 disabled:cursor-not-allowed">배틀 아레나</button>
                      <button id="go-to-ranking-btn" class="bg-[#f99157] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#d76e2d] transition-transform transform hover:scale-105">랭킹 보기</button>
                      <button id="show-type-chart-btn" class="bg-[#8abeb7] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#6cc] transition-transform transform hover:scale-105">상성표</button>
                      <button id="show-rarity-table-btn" class="bg-[#c9c] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#a7a] transition-transform transform hover:scale-105">등급표</button>
                 </div>
            </header>

            <!-- Ranking Podium -->
            <div id="ranking-podium-container" class="mb-12">
                <h2 class="font-title text-3xl text-center mb-4 text-gray-200">명예의 전당</h2>
                <div id="ranking-podium-view" class="podium"></div>
            </div>

            <div id="character-creation-section" class="bg-gray-800/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg mb-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <select id="universe-select" class="p-3 border-2 rounded-lg focus:outline-none focus:ring-2 bg-gray-700 text-white border-gray-600 focus:ring-[#9c9]">
                        <option value="감성의_숲">감성의 숲</option>
                        <option value="악몽의_저택">악몽의 저택</option>
                        <option value="사이버_펑크">사이버 펑크</option>
                        <option value="판타지_왕국">판타지 왕국</option>
                        <option value="수정_동굴">수정 동굴</option>
                    </select>
                    <input type="text" id="character-prompt" class="md:col-span-2 p-3 border-2 rounded-lg focus:outline-none focus:ring-2 bg-gray-700 text-white border-gray-600 focus:ring-[#8abeb7]" placeholder="예: 거미 다리를 가진 피카츄, 얼굴은 슈퍼마리오">
                </div>
                <div class="mt-4 flex justify-center items-center gap-4">
                    <button id="generate-btn" class="bg-[#8abeb7] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#6cc] transition-transform transform hover:scale-105">
                        <span id="btn-text">크리처 소환! (1 크레딧)</span>
                        <span id="btn-loader" class="hidden w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                    </button>
                </div>
                <div id="error-message" class="text-yellow-400 mt-4 text-center text-sm font-semibold"></div>
            </div>
             <div id="filter-container" class="flex justify-center gap-2 mb-6">
                 <button class="filter-btn active" data-filter="all">전체</button>
                 <button class="filter-btn" data-filter="감성의_숲">감성의 숲</button>
                 <button class="filter-btn" data-filter="악몽의_저택">악몽의 저택</button>
                 <button class="filter-btn" data-filter="사이버_펑크">사이버 펑크</button>
                 <button class="filter-btn" data-filter="판타지_왕국">판타지 왕국</button>
                 <button class="filter-btn" data-filter="수정_동굴">수정 동굴</button>
             </div>
            <div id="pokedex-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"></div>
            <div id="empty-state" class="text-center py-16 px-6 bg-gray-800 rounded-2xl shadow-lg hidden"><h3 class="mt-4 text-xl font-semibold text-gray-100">도감이 비어있습니다. 첫 크리처를 소환해보세요!</h3></div>
            <div id="pagination-controls" class="text-center mt-8"></div>
        </div>
    </div>
    
    <!-- Other Views (Containers) -->
    <div id="detail-view" class="view"></div>
    <div id="battle-selection-view" class="view"></div>
    <div id="battle-arena-view" class="view"></div>
    <div id="ranking-view" class="view"></div>
    <div id="profile-view" class="view"></div>
    <div id="admin-view" class="view"></div>

    <!-- Main JavaScript File -->
    <script type="module" src="main.js"></script>
</body>
</html>

